<div class="container my-5">
  <h2 class="fw-bold text-modern">Historique des demandes</h2>

  <div *ngIf="loading" class="alert alert-info mt-3">
    Chargement des demandes...
  </div>

  <div *ngIf="errorMessage && !loading" class="alert alert-danger mt-3">
    {{ errorMessage }}
  </div>

  <div class="card history-card mt-4" *ngIf="!loading && demandes.length > 0">
    <div class="card-body p-4">
      <table class="table table-hover align-middle">
        <thead>
        <tr>
          <th>Type</th>
          <th>Date début</th>
          <th>Date fin</th>
          <th>Date soumission</th>
          <th>Date traitement</th>
          <th>Statut</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let demande of demandes">
          <td data-label="Type">{{ demande.typeConge }}</td>
          <td data-label="Date début">{{ demande.dateDebut | date:'dd/MM/yyyy' }}</td>
          <td data-label="Date fin">{{ demande.dateFin | date:'dd/MM/yyyy' }}</td>
          <td data-label="Soumission">{{ demande.dateSoumission | date:'dd/MM/yyyy' }}</td>
          <td data-label="Traitement">
            {{ demande.dateTraitement ? (demande.dateTraitement | date:'dd/MM/yyyy') : 'En attente' }}
          </td>
          <td data-label="Statut">
              <span
                class="statut-badge"
                [ngClass]="{
                  'badge-accept': demande.statut === 'Acceptée',
                  'badge-refuse': demande.statut === 'Refusée',
                  'badge-attente': demande.statut === 'En attente'
                }"
              >
                {{ demande.statut }}
              </span>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div *ngIf="!loading && demandes.length === 0 && !errorMessage" class="alert alert-warning mt-3">
    Aucune demande pour le moment.
  </div>
</div>
