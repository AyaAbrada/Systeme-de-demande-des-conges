<h2 class="mb-4">Historique des demandes</h2>

<div *ngIf="loading" class="text-center my-3">
  Chargement des demandes...
</div>

<div *ngIf="errorMessage" class="alert alert-danger">
  {{ errorMessage }}
</div>

<div *ngIf="!loading && demandes.length > 0" class="table-responsive">
  <table class="table table-striped">
    <thead>
    <tr>
      <th class="text-center">Id</th>
      <th></th>
      <th>Employé</th>
      <th>Manager</th>
      <th>Type</th>
      <th>Statut</th>
      <th class="text-right">Début</th>
      <th class="text-right">Fin</th>
      <th class="text-right">Soumission</th>
      <th class="text-right">Traitement</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let demande of demandes; let i = index">
      <td data-label="Id" class="text-center">{{ i + 1 }}</td>
      <td data-label="Action" class="text-center">
        <!-- tu pourras ajouter des icônes ou boutons ici -->
      </td>
      <td data-label="Employé">{{ demande.employeNomComplet }}</td>
      <td data-label="Manager">{{ demande.managerNomComplet }}</td>
      <td data-label="Type">{{ demande.typeConge }}</td>
      <td data-label="Statut">
          <span [class.bg-warning]="demande.statut === 'En_Attante'"
                [class.bg-success]="demande.statut === 'ACCEPTER'"
                [class.bg-danger]="demande.statut === 'REFUSER'">
            {{ demande.statut }}
          </span>
      </td>
      <td data-label="Début" class="text-right">{{ demande.dateDebut }}</td>
      <td data-label="Fin" class="text-right">{{ demande.dateFin }}</td>
      <td data-label="Soumission" class="text-right">{{ demande.dateSoumission }}</td>
      <td data-label="Traitement" class="text-right">{{ demande.dateTraitement || '-' }}</td>
    </tr>
    </tbody>
  </table>
</div>

<div *ngIf="!loading && demandes.length === 0" class="text-center my-3">
  Aucune demande à afficher.
</div>
